# JAVA基础

### 概述

java优势：最为流行最为广泛；可移植性好、安全可靠、性能较好；开发社区完善，功能丰富。

java应用：桌面应用开发（idea、税务管理软件等）、**企业级应用开发**（微服务、大型互联网应用）、移动应用开发（android、医疗设备）、服务器系统开发（应用后台）、大数据开发（hadoop）、游戏开发等。（行业覆盖率达91%）

java技术体系平台：JAVA SE标准版（核心和基础，用于开发**桌面级应用**，需求量较小）、JAVA EE企业版（多用于**大型网站开发**，是学习的重点）、JAVA ME（用于嵌入式设备技术）、Java Card

java特性：一次编译处处可用，java程序通过javac编译为class文件后，通过各平台的JVM虚拟机均可执行。



下载java后，在bin文件夹中会有两个关键程序：java为执行工具，javac为编译工具。

JVM：java虚拟机，是运行java程序的地方。

JDK：java开发工具，包括编译器、虚拟机以及java内置的功能。最常用的版本为JDK8.0，未来会发展JDK11.0作为稳定的平台。

JRE：java运行环境，JRE可以让计算机系统运行java应用程序；内部包含一个java虚拟机和一些标准的类别函数库。



**关系**

* JDK会关联JRE
* 安装JDK时会包含java、javac、jvm和核心类库等java开发运行环境。
* JRE只包含java、jvm和核心类库等java运行环境。（不含javac）



**注意事项**

* 用记事本编写java脚本时，java文件名必须和代码的类名一致

* javac编译java文件后，会产生class文件；使用java命令执行时，不需要带class

* 旧版本的JDK安装时的PATH需要自己设置，环境变量设置：（文件资源管理器中）此电脑-属性-高级系统设置-高级-环境变量，一般设置两个环境变量：JAVA_HOME：jdk安装位置          Path：JDK的java/javac的安装位置（bin）[%JAVA_HOME%/bin]

* System、String在JDK的Java.lang包下，是默认的包，不需要导入。

  

---



### IDEA特性

**基础**

IDEA规定的项目结构：工程-模块-包-类



**快捷键**

ctrl+d 复制当前行

ctrl+x 剪切当前行（替换ctrl+y)

ctrl+enter 在当前光标前加一行

shift+enter 直接跳到下一行

ctrl+alt+l	格式化代码

ctrl+/	注释代码

ctrl+shift+/	多行注释代码

alt+enter	自动修正代码

tab	将类需要的包自动导入



**快捷输入**

**main**	->	public static void main(String[] args) {}

**sout**	->	System.out.println();

**content.sout**	->	System.out.println(content);

**array.fori**	->	for (int i = 0; i < array.length ; i++) {}

**fori**	->	for (int i = 0; i < ; i++) {}



**Debug**

待补





**注意事项**

* 使用IDEA自带的导入模块功能，会关联导入原目录的文件，一旦原目录的文件被删除，导入的包也会删除。所以我们建议自己创模块，复制其中的包即可；

* IDEA删除模块时，在菜单中remove只会将模块移除project，而不会删除源文件，要在左上角右键delete；在文件管理器中删除模块也不能删干净，要在.idea的modules.xml中进行修改，再重启idea；

  

---



### 基础知识

**字面量**

字面量包括整型、小数、字符（必须使用单引号，有且只有一个字符）、字符串（必须使用双引号，内容可有可无）、布尔值（true/false)、空值（null)



**变量**

变量在定义是可以没有初始值，但在使用时必须有；变量的有效范围从定义开始到“}”截止，同一范围不能定义两个相同的变量



**数据类型**

数据类型分为引用数据类型和基本数据类型，引用类型的变量存放的是数据在内存中的地址。基本数据类型的变量则存放数据本身，类型包括byte、short、int、long、float、double、char、boolean 8种。
byte(-128~127)，占1个字节；short(-32768~32767)，占2个字节；int，占4个字节；long，占8个字节；
float，占4个字节；double，占8个字节；char，占2个字节；boolean，占1个字节。

**注意：**java中单引号只能用于单个字符，用char修饰；双引号可以用于单个或多个字符时，用String修饰。



**关键字和标志符**

关键字是java内置的一些单词，不能用作类名或变量名；

标志符适用于给类、方法、变量起名的规矩。要求：不能以数字开头、区分大小写、不能是关键字。

命名规范（驼峰模式）：变量首字母小写，类名首字母大写。



**类型转换**

* 自动类型转换

 当不同类型的变量赋值给其他类型的变量时会发生自动类型转换，类型范围小的变量可以直接赋值给类型范围大的变量。（byte->short->int->long->float->double 右边可以兼容左边）

* 表达式的自动类型转换

在表达式中，小范围类型的变量会自动转换成叫大范围的类型再运算（byte/short/char->int）。表达式的最终结果类型由表达式的最高类型决定。

* 强制类型转换

`type var1 = (type)var2`

当类型范围大的数据赋值给类型范围小的变量时，需要使用强制类型转换，容易造成数据（丢失）溢出。当我们将浮点型强转为整型时，会丢弃小数部分，保留整数部分返回。



**运算符**

* 基本运算符

在java中两个整数相除，得出的是商**向0取整**的值。如果要保留小数，可以在被除数上乘以1.0。
+符号在字符串运算时用作连接符；与python不同，java中可以直接将数据与字符串相加，但当遇到数字首先与单个字符相加时，会得到数字与ascii的加和值。

* 自增自减运算符

++/--放在变量前，会先做自增自减，再对变量值进行运算；放在变量后，先计算再对变量自增自减。

* 赋值运算符

扩展赋值运算符：+= -= *= /= %=，其中均隐含了强制类型转换。

* 关系运算符
* 逻辑运算符

& 逻辑与    | 逻辑或    ! 逻辑非    ^ 逻辑异或
&& 短路与：左边为false则右边不执行    || 短路或：左边为true，右边不执行

* 三元运算符

`条件表达式?value1:value2`    条件表达式不需要加括号    

* 优先级：百度



**内存图**

java将内存区域划分为：**栈、堆、方法区**、本地方法栈、寄存器

方法区：字节码(class)文件加载时进入的内存、常量池存放位置

栈内存：方法运行时进入的内存（包括变量）、还可以存放基本数据类型的局部变量

堆内存：new的对象在堆内存中开辟空间并产生地址（首先在堆中开辟空间，将产生的地址赋值给栈中的对象，栈保存着该引用对象在堆中的地址）



**键盘录入技术**

API（应用程序编程接口）：Java写好的程序（功能代码）。

```java
Scanner scan = new Scanner(System.in);
String str1 = scan.next();
int num = scan.nextInt();
```



**产生随机数**

```java
Random rand = new Random();
int randomNumber = rand.nextInt(50)+1;//(1-50)	注意，nextInt(bound)方法会产生[0,bound)范围的数字，左闭右开
```



---



### **程序流程控制**

for loop格式:`for(初始化语句;循环判断条件;循环变量迭代){循环操作}`

for循环细节：

* 循环判断条件是一个返回boolean的表达式，如果为true则继续执行循环操作，否则退出；
* for循环在初始化后直接进行条件判断，之后每次执行完当前循环是先对循环变量进行迭代之后，然后再判断是否满足判断条件；
* for第三要素，初始化和变量迭代可以省略（写在for前和循环内部），但“;”和判断条件不能省略；
* 循环初始值可以有多条语句，但要求类型一样，中间用逗号隔开；循环变量迭代也一样。



注意点：

* 使用for(element:array){}的写法时，对element进行赋值或修改无法真正改变array的值，因为element只有在for循环内有效，修改值需要修改array[i]的值。
* 知道循环次数用for，知道循环中止情况使用while。`while(true)`和`for(::)`都可完成死循环，一般使用`while(true){}`完成死循环。



---



### 数组

**静态初始化数组**

定义格式：`type[] arrayName = new type[]{*elements};`	注意在[]中不用写数组长度，由编译器自动判断

简化：`type[] arrayName = {*elements};`或`type arrayName[] = {*elements};`

数组长度：`arrayName.length`

数组索引：`arrayName[0]`

数组变量名中存储的是数组在内存中的地址，因此数组是**引用类型**。直接打印数组时，输出结果表示数组存放的地址。	e.g.[D@4c873330 	[表示数组，D表示数组为double类型，@表示在..地方，4c873330表示该数组的16位地址。



**动态初始化数组**

定义格式：`type[] arrayName = new type[arrayLength];`	

动态初始化先定义后赋值，定义后数组的类型和长度固定，各元素有一个默认值。	默认值：int:0 	float:0.0 	string:null	boolean:false

数组拷贝:

```java
//独立拷贝
int[] arr1 = {10,20,30};
int[] arr2 = new int[arr1.length];
for(int i=0;i<arr1.length;i++){
	arr2[i]=arr1[i];
}
//引用拷贝（互相影响）
int[] arr2=arr1;
```

数组翻转：

```java
// 在原数组翻转
int[] arr = {11,22,33,44,55,66};
for (int i = 0; i < arr.length/2; i++) {//注意java中整数/整数，得到的值为商向0取整的值;因此如果arr.length为奇数，则相当于i<(arr.length-1)/2
    int temp = arr[arr.length-1-i];
    arr[arr.length-1-i] = arr[i];
    arr[i] = temp;
}
//创建新数组逆序赋值
int[] arr2 = new int[arr.length];
for(int i=arr.length-1,j=0)
```



**二维数组**

定义格式：`type[][] arrayName = {{},{},{}...};`	或	`type[] arrayName[] = {{},{}...};`

动态初始化：`type[][] arrayName = new type[arrayLength_y][arrayLength_x];`(定义后二维数组的类型和长度固定，各元素有一个默认值)

遍历二维数组：

```java
for (int i = 0; i < array.length; i++) {
    for (int j = 0; j < array[i].length; j++) System.out.print(array[i][j]+" ");
}
```

二维数组的内存布局：数组名表示该数组存放的地址，该地址存放着每一行的地址，每个地址又存放构成各行的元素。

二维数组可以只确定行，但每个一维数组均需要重新创建空间：

```java
int[][] array = new int[3][]；
for(int i=0;i<array.length;i++){
	arr[i] = new int[i+1];
	for(int j=0;j<array[i].length;j++){
		arr[i][j] = i+1;
	}
}//array:{{1},{2,2}，{3,3,3}}
```



**注意事项**

* 如果访问元素索引大于最大索引，执行会出现**数组索引越界异常**(ArrayIndexOutOfBoundsException) 
* 如果数组变量中没有存储数组的地址，而是null，在访问数组信息时会出现**空指针异常**(NullPointerException)



---



### 方法

方法是一种语法结构，可以把一段代码封装成一个功能，以便重复调用。

**方法的定义和调用**

定义：`访问修饰符 返回值类型 方法名(形参列表){code;	return 返回值;}`

调用：`方法名();`



**访问修饰符的作用**

访问修饰符用于控制方法使用的范围，包括public、protected、private、默认，不写时默认访问



**方法的内存原理**

方法在没有被调用时，在方法区的字节码文件中存放；

方法被调用时，就会开辟一个独立空间（**栈空间**）；当方法执行完毕或执行到return语句后就会**返回到调用的位置**。



**方法的参数传递机制**

值传递：在传输实参给方法的形参的时候，并不是传输实参本身，而是传输实参变量中数据值。

引用传递：在传输实参给方法的形参的时候，传递的是实参变量的地址。



**方法重载**

同一个类中，出现多个方法名称相同，但**形参列表不同**的**（形参的个数、类型、顺序不同【顺序指形参类型的顺序】）**，这些方法就是重载方法。（修饰符、返回值不能作为重载的条件）

优势：可读性好（根据形参实现功能差异化的选择）



**返回值**

当return关键词单独成行，可以立即结束当前方法的执行；

有返回值的方法调用时可以定义变量接受结果或直接输出调用，无返回值方法的调用只能单独成行；

一个方法最多只能有一个返回值，可以通过返回数组返回多个值。



**注意事项**

* 方法和方法之间为平级关系，不可嵌套定义；类则可以，在类内部的类被称为内部类；
* 方法的编写顺序与执行无关，都是先调用main方法；
* 普通方法可以和类名相同,它和构造方法唯一的区别就在于有返回类型；



---



### 面向对象

类是共同特征的描述，对象是真实存在的具体实例。

**设计对象**

一个类中包括：**成员变量、成员方法、构造器、代码块、内部类**

创建对象格式：`访问修饰符 类名 对象名 = new 类名();`	



**对象内存布局和分配**

1. 创建对象后，会首先在**方法区**加载类的信息
2. 然后根据类信息在**堆**中创建一个对象，进行默认初始化
3. 将堆中的地址返回给**栈**中的对象名（在程序中表现为对象名），这个地址会指向该对象（包含对象的属性和方法）。如果属性为字符串（引用类型）则属性为指向方法区中的常量池的地址，如果为基本数据类型，则直接在堆中存储。



**注意事项**

* 成员变量的完整定义：`修饰符 数据类型 变量名称 = 初始化值;`一般无需指定初始化值，变量存在默认值；
* 类名首字母需要大写，并满足驼峰模式；
* 一个JAVA文件可以定义多个Class类，**但只有一个类是public修饰**，且public修饰的类名必须为文件名；在实际开发中一个文件定义一个class类。



























































